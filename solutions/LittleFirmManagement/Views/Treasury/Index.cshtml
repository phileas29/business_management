<h1>Treasury</h1>

<div class="container">
    <div class="row">
        <div class="col-12">
            <nav aria-label="Page navigation">
                <ul class="pagination justify-content-center">
                    @foreach (KeyValuePair<int, string> g in Model.GranularityMapping)
                    {
                        <li class="page-item @(g.Key == @Model.SelectedGranularity ? "active" : "")">
                            <a class="page-link" href="/Treasury/Index?selectedGranularity=@(g.Key)&selectedDetails=@Model.SelectedDetails">@(g.Value)</a>
                        </li>
                    }
                </ul>
            </nav>
            <nav aria-label="Page navigation">
                <ul class="pagination justify-content-center">
                    @foreach (KeyValuePair<int, string> g in Model.DetailsMapping)
                    {
                        <li class="page-item @(g.Key == @Model.SelectedDetails ? "active" : "")">
                            <a class="page-link" href="/Treasury/Index?selectedGranularity=@Model.SelectedGranularity&selectedDetails=@(g.Key)">@(g.Value)</a>
                        </li>
                    }
                </ul>
            </nav>

            <div class="table-responsive">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th></th>
                            @if (Model.SelectedDetails != 0)
                            {
                                <th></th>
                            }
                            @for (int i = 0; i < Model.Data.GetLength(1); i++)
                            {
                                DateTime startDate = (Model.Begin).AddMonths(i * Model.N);
                                <th>@startDate.ToString("yyyy")<br>@startDate.ToString("MMMM")</th>
                            }
                        </tr>
                    </thead>
                    <tbody>
                        @for (int row = 0; row < Model.Data.GetLength(0); row++)
                        {
                            <tr>
                                <th>@Model.Labels[row][0]</th>
                                @if (Model.SelectedDetails != 0)
                                {
                                    <th>@Model.Labels[row][1]</th>
                                }
                                @for (int month = 0; month < Model.Data.GetLength(1); month++)
                                {
                                    decimal amount = Model.Data[row, month];
                                    if (amount == 0)
                                    {
                                        <td></td>
                                    } else {
                                        <td>@amount.ToString("0.00")</td>
                                    }
                                }
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>